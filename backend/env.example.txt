# ============================================
# YAARYATRA Backend Environment Variables
# ============================================
# Copy this file to .env and fill in your actual values
# For production, keep this file secure and never commit it to git

# ============================================
# SERVER CONFIGURATION
# ============================================
PORT=3000
NODE_ENV=development
API_BASE_URL=http://localhost:3000
FRONTEND_URL=http://localhost:19006

# ============================================
# DATABASE - MongoDB Atlas
# ============================================
# Get from: https://www.mongodb.com/cloud/atlas
# Format: mongodb+srv://username:password@cluster.mongodb.net/dbname?retryWrites=true&w=majority
MONGODB_URI=mongodb+srv://username:password@cluster.mongodb.net/yaaryatra?retryWrites=true&w=majority
MONGODB_DB_NAME=yaaryatra

# ============================================
# JWT AUTHENTICATION
# ============================================
# Generate secure random strings (min 32 characters)
# Use: openssl rand -base64 32
# Or: node -e "console.log(require('crypto').randomBytes(32).toString('base64'))"
JWT_SECRET=your-super-secret-jwt-key-min-32-characters-long-change-this-in-production
JWT_EXPIRES_IN=7d
JWT_REFRESH_SECRET=your-super-secret-refresh-key-min-32-characters-long-change-this-in-production
JWT_REFRESH_EXPIRES_IN=30d

# ============================================
# OTP SERVICE - Firebase Phone Auth
# ============================================
# Free tier: 10,000 verifications/month
# Project: yaaryathra
# 
# OPTION 1: Use JSON File (Recommended - Already Setup)
# Place yaaryathra-firebase-adminsdk-fbsvc-f7903b1e81.json in backend/ folder
# System will auto-detect and use it. You can leave env variables empty below.
#
# OPTION 2: Use Environment Variables
# Get from: https://console.firebase.google.com/project/yaaryathra/settings/serviceaccounts/adminsdk

OTP_PROVIDER=firebase
FIREBASE_PROJECT_ID=yaaryathra
FIREBASE_PRIVATE_KEY="-----BEGIN PRIVATE KEY-----\nMIIEvQIBADANBgkqhkiG9w0BAQEFAASCBKcwggSjAgEAAoIBAQCtDIJhD86zMA2m\nKafBXW+CJhUUV7igjZQzbpK1JuxPWm/tcSHsfWcVA0r0+3F9c/ruYThyTfw2Xrle\nUIm8PkWnI5T9EEczUp6B8WZyJoerKMSlu8/OrI+qinN6E22VGKs67uCy5T5PVm4d\nQf+DVT4kfCGGi/ZDPXIf2MRhB+FdMPbpyYj90opyPgTGj+suBkkCwQpMEUQbnTYP\nUcJpDeoF3f4Z13ubK0DljnaxqSVWhqVnWIsiQEEvuv0yxpirwTMfWKTtDa9uIR12\ngX+Bc4niluPGfuljHQDlgXGwEKMDinnutu67RIQwsVEyHsIIvLuXg3Oxh4V/whhk\nJgAtVZNdAgMBAAECggEAEkgFiBJ+8DAt6PVymvtveczjIjSINTHvy6UtS4Typwlz\nVJ7EijLPTol8BDiCC1JS2pcbuvuhHu9P3vZcLq5XdmpMZZWwJ+xdAXZKr9mBMKRM\nbgPS1s8lGEurGmTuCTfDcyTkSRHtzLzhQicEQtAhEgKpGgk0OXNG2LVyPZvzA4Cp\nnFjtHrpm5vywoVxvjfHov+okHrSBqQibwaOplmrBORKO8dT6IjLHBlvbGsOoD9W8\npF7k8EpR/GGMjs2KxxwC26qLXx44yKz0+C3Tpe+xfxVCX//gJBFJWiSAe0rMsTZT\nA+jGaR2WMrv9wwOvmyO/AVjOdPjwNGfoAoAP1bnw0wKBgQDk5PVtPRwzz93rZ3zu\nNyCKe/3ykoC3LAYe01x0bVUwV/SDwbgknTfiLJws5RQHTthUfH1KtAOMOtnpoMl6\ny4GR7UHFqcIltDJ8SgoNe0f4VObm+Sl+DfmjKaB5ZYQ6OlHRtQWcwZNNLOP+ezM/\nu6KGtKJwbEP2wlJitbHUFceTcwKBgQDBipFQNyAjl/ta3yLtfp4PXIWG8/G+42pS\nODCRZ7ufaiTcJgYDSpqtDM+y8/0eDH7EM/4ga+XqRI9mWG7CCqrSqY+TyjJhOTFm\n6esORd3LBY148BTWGfrhhGvAvjwGbkLMam8kBNJtAXcwU7wtBgp32HC5soyFr86J\nWezUVqSp7wKBgCgiKRI9S8ud39hdrd8K1W7SrMUygNUdJ/mRr71OSkiOs3XCqqno\n0xqaHcwVYnyhi3bM2R8XDyQwUXMQWSNpuU8/3W9uA3ee79cxGDAi9IyLPm0zNN5A\nTwwXyWZfsV6QSTZO2iwRGOXIQDWnnmXHXYjm9TBnG0eR7OYX25VHOFYXAoGBAJBI\nVgZf4jTGw5q+CFLW9sxq5Bx0Vb9B2GxM+WAc3hF81tfL/OWNQ3xItboqDIPPOt3Y\nCNZwuakIzYK14HQF8c00nRXHQgGa2opnTlWInk0Q6aPEDzSBj7d5ub6p0yPUJTYx\nDoPimGCtHAbKFdnWzA0GLRsy0XGEW8unX1f4866/AoGAdk/Pf8PQMCYq2Oxc7Lg+\nMQmqxMeG/lYzFh88HAvXlsJ208l0ajcX0LGf0mR4Jz5tknAnOBilNSc2jfOSVdG4\nP61S6Q8zynHX8fyZwt71juYaW5nRvGg/hysc+kFL0qiT7F8phm1aIk/Wp0b53a9N\nSTHy5RmB8dnZLSJ3o55okzU=\n-----END PRIVATE KEY-----\n"
FIREBASE_CLIENT_EMAIL=firebase-adminsdk-fbsvc@yaaryathra.iam.gserviceaccount.com
OTP_EXPIRES_IN=300
OTP_LENGTH=4

# ============================================
# SMS PROVIDER (for sending OTP via SMS)
# ============================================
# Firebase Admin SDK cannot send SMS directly
# Use one of these providers to send OTP via SMS:
# - twilio: Recommended, easy setup, pay-as-you-go
# - msg91: Good for India, competitive rates
# - textlocal: Good for India, free tier available

SMS_PROVIDER=twilio

# Twilio (Recommended - https://www.twilio.com)
# Free trial: $15.50 credit
# Get from: https://console.twilio.com
TWILIO_ACCOUNT_SID=your_twilio_account_sid
TWILIO_AUTH_TOKEN=your_twilio_auth_token
TWILIO_PHONE_NUMBER=+1234567890  # Your Twilio phone number (format: +1234567890)

# MSG91 (For India - https://www.msg91.com)
# Free tier: 100 SMS/day
MSG91_AUTH_KEY=your_msg91_auth_key
MSG91_SENDER_ID=YAARYA  # 6 characters max

# TextLocal (For India - https://www.textlocal.in)
# Free tier: 100 SMS/day
TEXTLOCAL_API_KEY=your_textlocal_api_key
TEXTLOCAL_SENDER=TXTLCL  # Default sender ID

# Note: If SMS provider is not configured, OTP will be generated and stored
# but NOT sent via SMS. You can check backend logs to see the OTP value.

# Note: Since you have the JSON file (yaaryathra-firebase-adminsdk-fbsvc-f7903b1e81.json),
# you can leave FIREBASE_PRIVATE_KEY and FIREBASE_CLIENT_EMAIL empty above.
# The system will automatically use the JSON file if it exists in backend/ folder.

# ============================================
# FILE STORAGE - Cloudinary
# ============================================
# Free tier: 25GB storage, 25GB bandwidth/month
# Sign up: https://cloudinary.com
# Get credentials from: https://console.cloudinary.com/settings/api-keys

CLOUDINARY_CLOUD_NAME=your-cloud-name
CLOUDINARY_API_KEY=your-api-key-here
CLOUDINARY_API_SECRET=your-api-secret-here
CLOUDINARY_FOLDER=yaaryatra

# ============================================
# DOCUMENT VERIFICATION - IDfy
# ============================================
# Free tier: 100 verifications/month
# Sign up: https://www.idfy.com
# 
# MOCK MODE: Leave IDFY_API_KEY empty for development
# - Verification will always succeed
# - All data still stored in database
# - No API calls made
#
# REAL MODE: Add your IDfy API key for production
# - Real verification via IDfy API
# - Requires valid API key

DOCUMENT_VERIFICATION_PROVIDER=idfy
IDFY_API_KEY=
IDFY_API_URL=https://api.idfy.in

# ============================================
# PAYMENT GATEWAY - Razorpay
# ============================================
# For India: https://razorpay.com
# Get credentials from: https://dashboard.razorpay.com/app/keys
# Use test keys for development, live keys for production

PAYMENT_PROVIDER=razorpay
RAZORPAY_KEY_ID=rzp_test_your_key_id_here
RAZORPAY_KEY_SECRET=your_razorpay_key_secret_here
RAZORPAY_WEBHOOK_SECRET=your_webhook_secret_here

# ============================================
# MAPS SERVICE
# ============================================
# OpenStreetMap: Free, no API key needed (default - recommended)
# Google Maps: Requires API key ($200 free credit/month)

MAPS_PROVIDER=openstreetmap
GOOGLE_MAPS_API_KEY=
GOOGLE_MAPS_GEOCODING_API_KEY=

# OpenStreetMap is free and doesn't require API keys - recommended!
# To use Google Maps instead, set MAPS_PROVIDER=google and add API keys above

# ============================================
# ADMIN CONFIGURATION
# ============================================
# Admin account credentials for backend admin panel
# CHANGE THESE IN PRODUCTION!

ADMIN_USERNAME=admin
ADMIN_PASSWORD=change-this-secure-password-in-production-min-8-chars
ADMIN_EMAIL=admin@yaaryatra.com

# ============================================
# WEBSOCKET CONFIGURATION
# ============================================
# Enable WebSocket for real-time features (chat, notifications, live updates)

WEBSOCKET_ENABLED=true
WEBSOCKET_PORT=3001

# ============================================
# RATE LIMITING
# ============================================
# Prevent abuse: limit requests per time window
# windowMs: Time window in milliseconds (15 minutes = 900000)
# maxRequests: Maximum requests allowed in the window

RATE_LIMIT_WINDOW_MS=900000
RATE_LIMIT_MAX_REQUESTS=100

# ============================================
# QUICK SETUP CHECKLIST
# ============================================
# [ ] MongoDB URI (required)
# [ ] JWT_SECRET and JWT_REFRESH_SECRET (required - generate with openssl)
# [ ] Firebase: Use JSON file OR fill env variables (JSON file recommended - already setup!)
# [ ] Cloudinary credentials (required for file uploads)
# [ ] IDfy API key (optional - leave empty for mock mode)
# [ ] Razorpay keys (optional - only if using payments)
# [ ] Admin password (change from default)
# [ ] All other values can use defaults

# ============================================
# SECURITY NOTES
# ============================================
# 1. Never commit .env file to git (already in .gitignore)
# 2. Change all default passwords in production
# 3. Use strong, randomly generated JWT secrets
# 4. Rotate API keys regularly
# 5. Use environment variables in production (not .env file)
# 6. Keep Firebase JSON file secure

# ============================================
# SERVICE LINKS
# ============================================
# MongoDB Atlas: https://www.mongodb.com/cloud/atlas
# Firebase Console: https://console.firebase.google.com/project/yaaryathra
# Cloudinary: https://console.cloudinary.com
# IDfy: https://www.idfy.com
# Razorpay Dashboard: https://dashboard.razorpay.com
# Google Cloud Console: https://console.cloud.google.com

# ============================================
# EMAIL CONFIGURATION (for OTP and notifications)
# ============================================
# Gmail SMTP settings
EMAIL_HOST=smtp.gmail.com
EMAIL_PORT=587
EMAIL_SECURE=false
EMAIL_USER=venkateshponnuru6@gmail.com
EMAIL_PASSWORD=ecxe uvbk kycu vmlw

# Note: For Gmail, you need to use an App Password
# Generate App Password: https://myaccount.google.com/apppasswords
